<VirtualHost *:80>
	ServerName localhost
	ServerAdmin lpc@cs.tufts.edu
	WSGIScriptAlias / /home/pi/blockly_ws.wsgi
	<Directory /home/pi/blockytalky/backend>
		Order allow,deny
		Allow from all
	</Directory>
	RewriteEngine On
	RewriteCond %{HTTPS} !=on
       RewriteRule ^/?app/(.*) https://%{SERVER_NAME}/app/$1 [R,L]
	
</VirtualHost>
<VirtualHost *:443>
	ServerName coder.local
	SSLEngine on
	SSLCertificateFile 	/home/coder/coder-dist/coder-base/certs/server.cert
	SSLCertificateKeyFile 	/home/coder/coder-dist/coder-base/certs/server.key
	ProxyRequests off
	<Proxy *>
		Order deny,allow
		Allow from all
	</Proxy>

	<Location />
		ProxyPass http://localhost:8080/ retry=0 acquire=3000 timeout=600 Keepalive=On
		ProxyPassReverse http://localhost:8080/
	</Location>
	RewriteEngine On
	RewriteRule ^/$ http://%{SERVER_NAME}/ [R,L]
</VirtualHost>
